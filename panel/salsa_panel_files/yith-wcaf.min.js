jQuery(document).ready(function(c){function i(){return navigator.userAgent.match(/ipad|iphone/i)}c.fn.yith_wcaf_dashboard_commissions=function(){var t=c(this);t.find(":input.wc-product-search").filter(":not(.enhanced)").each(function(){var t={allowClear:!!c(this).data("allow_clear"),placeholder:c(this).data("placeholder"),minimumInputLength:c(this).data("minimum_input_length")?c(this).data("minimum_input_length"):"3",escapeMarkup:function(t){return t},ajax:{url:yith_wcaf.ajax_url,dataType:"json",quietMillis:250,data:function(t,e){return{term:t,action:"yith_wcaf_json_search_products_and_variations",security:yith_wcaf.search_products_nonce}},results:function(t,e){var a=[];return t&&c.each(t,function(t,e){a.push({id:t,text:e})}),{results:a}},cache:!0},multiple:!1,initSelection:function(t,e){return e({id:t.val(),text:t.attr("data-selected")})}};t=c.extend(t,{formatMatches:function(t){return 1===t?yith_wcaf.labels.select2_i18n_matches_1:yith_wcaf.labels.select2_i18n_matches_n.replace("%qty%",t)},formatNoMatches:function(){return yith_wcaf.labels.select2_i18n_no_matches},formatAjaxError:function(t,e,a){return yith_wcaf.labels.select2_i18n_ajax_error},formatInputTooShort:function(t,e){var a=e-t.length;return 1==a?yith_wcaf.labels.select2_i18n_input_too_short_1:yith_wcaf.labels.select2_i18n_input_too_short_n.replace("%qty%",a)},formatInputTooLong:function(t,e){var a=t.length-e;return 1==a?yith_wcaf.labels.select2_i18n_input_too_long_1:yith_wcaf.labels.select2_i18n_input_too_long_n.replace("%qty%",a)},formatSelectionTooBig:function(t){return 1===t?yith_wcaf.labels.select2_i18n_selection_too_long_1:yith_wcaf.labels.select2_i18n_selection_too_long_n.replace("%qty%",t)},formatLoadMore:function(t){return yith_wcaf.labels.select2_i18n_load_more},formatSearching:function(){return yith_wcaf.labels.select2_i18n_searching}}),c(this).select2(t).addClass("enhanced")}),t.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(t,e){c("#ui-datepicker-div").removeClass(function(){return c("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},c.fn.yith_wcaf_dashboard_clicks=function(){c(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(t,e){c("#ui-datepicker-div").removeClass(function(){return c("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},c.fn.yith_wcaf_dashboard_payments=function(){c(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(t,e){c("#ui-datepicker-div").removeClass(function(){return c("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},c.fn.yith_wcaf_dashboard_withdraw=function(){var i=c(this),n=i.find("#withdraw_from"),r=i.find("#withdraw_to"),t=i.find("#billing_country"),o=i.find('[name="type"]'),e=i.find("input"),a=i.find("form");n.add(r).on("change",function(){var t=n.val(),e=r.val(),a={action:"get_withdraw_amount",withdraw_from:t,withdraw_to:e,security:yith_wcaf.get_withdraw_amount};t&&e&&c.ajax({type:"POST",url:yith_wcaf.ajax_url,data:a,beforeSend:function(){i.find(".information-panel").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){i.find(".information-panel").unblock()},success:function(t){i.find(".withdraw-current-total").html(t)},dataType:"html"})}),i.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(t,e){c("#ui-datepicker-div").removeClass(function(){return c("input").get(0).id}).addClass("yith-wcaf-datepicker")}}),o.on("change",function(){var t=o.filter(":checked").val(),e=c("#first_name"),a=c("#last_name"),i=c("#company"),n=c("#vat"),r=c("#cif");"business"===t?(e.closest("p").hide(),a.closest("p").hide(),r.closest("p").hide(),i.closest("p").show(),n.closest("p").show()):(e.closest("p").show(),a.closest("p").show(),r.closest("p").show(),i.closest("p").hide(),n.closest("p").hide())}).change(),t.trigger("change"),e.on("blur change",function(){!function(t){var e=t.attr("name"),a=t.val(),i=t.closest("p");(!i.hasClass("validate-required")||a)&&("withdraw_from"!==e&&"withdraw_to"!==e||a.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/))&&("payment_email"!==e||a.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/))?i.removeClass("yith-field-required"):i.addClass("yith-field-required")}(c(this))}),a.on("submit",function(){if(e.filter(":visible").blur(),e.closest("p.form-row").filter(".yith-field-required").length)return!1})},c.fn.yith_wcaf_dashboard_coupons=function(){!function(t,e){var a=t.data("tip"),i=(e=e||"bottom",c('<span class="yith_wcaf_tooltip"></span>'));void 0!==a&&a&&!t.find(".yith_wcaf_tooltip").length&&(i.addClass(e),t.append(i.html("<span>"+a+"</span>")))}(c(this).find(".help_tip"))},c.fn.yith_wcaf_generate_link=function(){c(this).find(".copy-trigger").on("click",function(t){var e=c(this).parents("p").find(".copy-target");if(0<e.length){if(e.is("input"))i()?e[0].setSelectionRange(0,9999):e.select(),document.execCommand("copy");else{var a=c("<input/>",{val:e.text(),type:"text"});c("body").append(a),i()?a[0].setSelectionRange(0,9999):a.select(),document.execCommand("copy"),a.remove()}c(document).triggerHandler("yith_wcaf_hide_link_copied_alert")||alert(yith_wcaf.labels.link_copied_message)}})},c.fn.yith_wcaf_registration_form=function(){var t=c(this),e=t.find("#how_promote"),a=t.find("#custom_promote").closest(".form-row");e.length&&e.on("change",function(){"others"===c(this).val()?a.show():a.hide()}).change()},c.fn.yith_wcaf_set_referrer=function(){var e=c(this);e.on("click","a.show-referrer-form",function(t){t.preventDefault(),e.find("form").slideToggle()}),e.on("submit","form.referrer-form",function(t){var e=c(this),a={action:"yith_wcaf_set_referrer",referrer_token:e.find('input[name="referrer_code"]').val(),security:yith_wcaf.set_referrer_nonce};return t.preventDefault(),e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),c.ajax({type:"POST",url:yith_wcaf.ajax_url,data:a,success:function(t){c(".woocommerce-error, .woocommerce-message").remove(),e.removeClass("processing").unblock(),t&&(e.before(t).find('input[name="referrer_code"]').prop("disabled"),e.slideUp()),c(document).trigger("yith_wcaf_referrer_set")},dataType:"html"}),!1})},c(".yith-wcaf-commissions").yith_wcaf_dashboard_commissions(),c(".yith-wcaf-clicks").yith_wcaf_dashboard_clicks(),c(".yith-wcaf-payments").yith_wcaf_dashboard_payments(),c(".yith-wcaf-withdraw").yith_wcaf_dashboard_withdraw(),c(".yith-wcaf-coupons").yith_wcaf_dashboard_coupons(),c(".yith-wcaf-set-referrer").yith_wcaf_set_referrer(),c(".yith-wcaf-link-generator").yith_wcaf_generate_link(),c(".yith-wcaf-registration-form").add(".woocommerce-form-register").add(".yith-wcaf-settings").yith_wcaf_registration_form()});